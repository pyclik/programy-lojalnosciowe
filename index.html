<!DOCTYPE html>
<html lang="pl" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analiza Programów Lojalnościowych Linii Lotniczych</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Dark Mode Tech (inspired by Tooploox) -->
    <!-- Application Structure Plan: A single-page dashboard with a sticky top navigation for easy access to distinct sections: 1. AI-Powered Strategy Generator (Gemini API), 2. Executive Summary (key recommendations), 3. Interactive Program Comparison (visuals), 4. Detailed Analysis (tabs), and 5. Actionable Tips. This structure prioritizes personalization, guiding the user from a custom-generated strategy to the data that supports it. -->
    <!-- Visualization & Content Choices: 
        - AI Strategy Generator: Goal: Provide personalized advice. Viz: Form + formatted text output. Interaction: User input submission. Justification: Offers a unique, high-value feature beyond static data. Library/Method: Gemini API (fetch).
        - Overall Program Comparison: Goal: Compare programs across key metrics. Viz: Radar chart. Interaction: Hover. Justification: Holistic visual summary. Library: Chart.js.
        - Earning Potential & Costs: Goal: Show quantitative differences. Viz: Context-specific Bar Charts. Interaction: Tab switching. Justification: Clear visualization for detailed analysis. Library: Chart.js.
        This approach integrates AI-driven personalization with effective data visualization.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a; /* bg-slate-900 */
            color: #cbd5e1; /* text-slate-300 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .tab-button {
            line-height: 1.4;
        }
        .tab-button.active {
            border-color: #34d399; /* border-emerald-400 */
            color: #34d399; /* text-emerald-400 */
            font-weight: 600;
        }
        .gradient-border-wrap {
            padding: 1px;
            border-radius: 1.5rem; /* rounded-3xl */
            background: linear-gradient(to bottom right, #34d399, #3b82f6);
            transition: all 0.3s ease-in-out;
        }
         .gradient-border-wrap:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px -5px rgba(52, 211, 153, 0.2);
        }
        .highlight-card {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(15, 23, 42, 0.1));
            border-left: 4px solid #10b981;
        }
        .gemini-spinner {
            width: 24px;
            height: 24px;
            border: 3px solid rgba(52, 211, 153, 0.3);
            border-radius: 50%;
            border-top-color: #34d399;
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="antialiased">

    <div id="app" class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
        
        <header class="text-center my-16">
            <h1 class="text-4xl sm:text-6xl font-bold text-slate-100 tracking-tighter">
                <span class="bg-clip-text text-transparent bg-gradient-to-r from-emerald-400 to-sky-400">
                    Analiza Programów Lojalnościowych
                </span>
            </h1>
            <p class="text-lg text-slate-400 mt-4 max-w-3xl mx-auto">Interaktywny raport wspierający wybór optymalnej strategii dla podróży służbowych z Polski.</p>
        </header>

        <nav class="sticky top-4 bg-slate-800/60 backdrop-blur-xl border border-slate-700 shadow-lg shadow-black/20 rounded-full z-10 mb-16 p-2 max-w-full lg:max-w-xl mx-auto">
            <ul class="flex justify-start sm:justify-center items-center space-x-1 overflow-x-auto flex-nowrap no-scrollbar">
                <li><a href="#gemini-strategy" class="text-sm sm:text-base text-slate-300 hover:text-white hover:bg-slate-700 font-medium px-3 sm:px-4 py-2 rounded-full transition-all whitespace-nowrap">✨ Twoja Strategia</a></li>
                <li><a href="#summary" class="text-sm sm:text-base text-slate-300 hover:text-white hover:bg-slate-700 font-medium px-3 sm:px-4 py-2 rounded-full transition-all whitespace-nowrap">Rekomendacje</a></li>
                <li><a href="#comparison" class="text-sm sm:text-base text-slate-300 hover:text-white hover:bg-slate-700 font-medium px-3 sm:px-4 py-2 rounded-full transition-all whitespace-nowrap">Porównanie</a></li>
                <li><a href="#analysis" class="text-sm sm:text-base text-slate-300 hover:text-white hover:bg-slate-700 font-medium px-3 sm:px-4 py-2 rounded-full transition-all whitespace-nowrap">Analiza</a></li>
                <li><a href="#tips" class="text-sm sm:text-base text-slate-300 hover:text-white hover:bg-slate-700 font-medium px-3 sm:px-4 py-2 rounded-full transition-all whitespace-nowrap">Wskazówki</a></li>
            </ul>
        </nav>

        <main class="space-y-20">

             <section id="gemini-strategy" class="scroll-mt-24">
                <div class="bg-slate-800/50 border border-slate-700 rounded-3xl p-8 sm:p-12">
                    <h2 class="text-3xl font-bold text-slate-100 mb-2">✨ Stwórz Osobistą Strategię</h2>
                    <p class="text-slate-400 mb-8">Opisz swoje potrzeby, a nasz ekspert AI przeanalizuje je i przygotuje spersonalizowaną rekomendację programu lojalnościowego.</p>
                    
                    <div id="strategy-form-container">
                        <div class="grid md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label for="travel-class" class="block text-sm font-medium text-slate-300 mb-2">Preferowana klasa podróży:</label>
                                <select id="travel-class" class="w-full bg-slate-800 border border-slate-600 rounded-md shadow-sm p-3 text-slate-300 focus:ring-emerald-500 focus:border-emerald-500">
                                    <option>Ekonomiczna</option>
                                    <option selected>Biznes</option>
                                    <option>Pierwsza</option>
                                </select>
                            </div>
                            <div>
                                <label for="travel-goal" class="block text-sm font-medium text-slate-300 mb-2">Mój główny cel:</label>
                                <select id="travel-goal" class="w-full bg-slate-800 border border-slate-600 rounded-md shadow-sm p-3 text-slate-300 focus:ring-emerald-500 focus:border-emerald-500">
                                    <option>Szybkie zdobycie statusu i korzyści (saloniki, fast track)</option>
                                    <option>Najlepsza wartość nagród (wymiana mil na loty)</option>
                                    <option>Elastyczność i upgrade'y do wyższych klas</option>
                                </select>
                            </div>
                        </div>
                         <div class="mb-6">
                            <label for="travel-patterns" class="block text-sm font-medium text-slate-300 mb-2">Opisz swoje typowe trasy i częstotliwość lotów:</label>
                            <textarea id="travel-patterns" rows="4" class="w-full bg-slate-800 border border-slate-600 rounded-md shadow-sm p-3 text-slate-300 focus:ring-emerald-500 focus:border-emerald-500" placeholder="np. 1-2 razy w miesiącu do Frankfurtu i Monachium (służbowo), 2 razy w roku do Nowego Jorku (prywatnie), kilka lotów po Europie w wakacje..."></textarea>
                        </div>
                        <button id="generate-strategy-btn" class="w-full sm:w-auto inline-flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-full text-slate-900 bg-emerald-400 hover:bg-emerald-500 transition-colors">
                            Generuj Strategię ✨
                        </button>
                    </div>

                    <div id="strategy-result-container" class="hidden mt-8 border-t border-slate-700 pt-8">
                        <div id="gemini-response" class="prose prose-invert prose-p:text-slate-300 prose-headings:text-slate-100 prose-strong:text-emerald-400 max-w-none"></div>
                    </div>
                </div>
            </section>
            
            <section id="summary" class="scroll-mt-24">
                <div class="bg-slate-800/50 border border-slate-700 rounded-3xl p-8 sm:p-12">
                    <h2 class="text-3xl font-bold text-slate-100 mb-2">Rekomendacje Główne</h2>
                    <p class="text-slate-400 mb-10">Na podstawie typowego profilu podróży biznesowej z Polski, oto 2 programy, które najczęściej okazują się najlepszym wyborem.</p>
                    <div class="grid md:grid-cols-2 gap-8">
                        <div class="gradient-border-wrap">
                            <div class="bg-slate-900 rounded-[23px] h-full p-8">
                                <h3 class="text-xl font-semibold text-slate-100">1. Miles & More (Star Alliance)</h3>
                                <p class="text-slate-400 mt-3"><strong>Główny wybór.</strong> Najlepsza opcja dzięki siatce połączeń LOT i Lufthansy. Zapewnia najwięcej opcji zbierania mil i prostą drogę do statusu Star Alliance Gold, który realnie podnosi komfort podróży.</p>
                            </div>
                        </div>
                        <div class="gradient-border-wrap">
                            <div class="bg-slate-900 rounded-[23px] h-full p-8">
                                <h3 class="text-xl font-semibold text-slate-100">2. Executive Club (oneworld)</h3>
                                <p class="text-slate-400 mt-3"><strong>Alternatywa premium.</strong> Idealny, jeśli często podróżujesz przez Londyn lub do USA z BA/AA. Wyróżnia się świetną wartością nagród na krótkich trasach i przejrzystym systemem statusowym.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="comparison" class="scroll-mt-24">
                <div class="bg-slate-800/50 border border-slate-700 rounded-3xl p-8 sm:p-12">
                    <h2 class="text-3xl font-bold text-slate-100 mb-2">Porównanie w Pigułce</h2>
                    <p class="text-slate-400 mb-8">Spójrz na kluczowe programy z lotu ptaka. Wykres i tabela pomogą Ci szybko ocenić ich potencjał.</p>
                    <div class="chart-container">
                        <canvas id="programRadarChart"></canvas>
                    </div>
                    <div class="mt-10 flow-root">
                        <div class="-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
                            <div class="inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8">
                                <table class="min-w-full divide-y divide-slate-700">
                                    <thead>
                                        <tr>
                                            <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-slate-300 sm:pl-0">Program / Sojusz</th>
                                            <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-slate-300">Zalety</th>
                                            <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-slate-300">Wady</th>
                                            <th scope="col" class="px-3 py-3.5 text-center text-sm font-semibold text-slate-300">Ocena</th>
                                        </tr>
                                    </thead>
                                    <tbody id="comparisonTableBody" class="divide-y divide-slate-800">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="analysis" class="scroll-mt-24">
                <div class="bg-slate-800/50 border border-slate-700 rounded-3xl p-8 sm:p-12">
                    <h2 class="text-3xl font-bold text-slate-100 mb-2">Analiza Szczegółowa</h2>
                    <p class="text-slate-400 mb-8">Czas na detale. Przeanalizuj każdy program pod kątem kluczowych parametrów.</p>
                    <div class="border-b border-slate-700 mb-8">
                        <nav id="analysisTabs" class="-mb-px flex space-x-3 overflow-x-auto" aria-label="Tabs">
                        </nav>
                    </div>
                    <div id="analysisContent">
                    </div>
                </div>
            </section>

            <section id="tips" class="scroll-mt-24">
                <div class="bg-slate-800/50 border border-slate-700 rounded-3xl p-8 sm:p-12">
                    <h2 class="text-3xl font-bold text-slate-100 mb-2">Praktyczne Wskazówki</h2>
                    <p class="text-slate-400 mb-8">Wykorzystaj te strategie, aby zmaksymalizować korzyści z programu i unikać popularnych błędów.</p>
                    <div class="space-y-6">
                        <div class="highlight-card p-6 rounded-2xl">
                            <h3 class="font-semibold text-lg text-emerald-300">Strategia "Status w jednym, nagrody w drugim"</h3>
                            <p class="text-slate-300 mt-2">Skup loty w jednym sojuszu (np. Star Alliance), by szybko zdobyć wysoki status. Jednocześnie punkty od partnerów (np. bankowych) transferuj do programu, który ma najlepszą wartość nagród na Twoich trasach (np. Avios w Executive Club).</p>
                        </div>
                         <div class="border border-slate-700 bg-slate-800 p-6 rounded-2xl">
                            <h3 class="font-semibold text-lg text-slate-100">Monitoruj "Sweet Spots" i Promocje</h3>
                            <p class="text-slate-400 mt-2">Regularnie sprawdzaj promocje takie jak "Meilenschnäppchen" (M&M) czy "Promo Rewards" (Flying Blue). To najszybsza droga do rezerwacji biletów w klasie biznes za ułamek standardowej ceny milowej.</p>
                        </div>
                         <div class="border border-slate-700 bg-slate-800 p-6 rounded-2xl">
                            <h3 class="font-semibold text-lg text-slate-100">Celujesz w Upgrade do Biznesu?</h3>
                            <p class="text-slate-400 mt-2">Programy <strong>Star Alliance</strong> (szczególnie Miles & More) oferują najwięcej możliwości upgrade'u za mile, zwłaszcza na lotach Lufthansy, SWISS i LOT. Pamiętaj jednak, że często wymagają one zakupu droższej, elastycznej taryfy ekonomicznej. Alternatywnie, najwyższe statusy w programach amerykańskich, jak AAdvantage, dają cenne certyfikaty na upgrade (System-Wide Upgrades), które są jednym z najbardziej pożądanych benefitów.</p>
                        </div>
                         <div class="border border-slate-700 bg-slate-800 p-6 rounded-2xl">
                            <h3 class="font-semibold text-lg text-slate-100">Dostęp do Saloników i Fast Track? Kluczem jest Status</h3>
                            <p class="text-slate-400 mt-2">Te udogodnienia rzadko kupuje się za punkty. Są one kluczowym benefitem posiadania <strong>statusu elitarnego</strong>. Osiągnięcie poziomu Star Alliance Gold, oneworld Sapphire lub SkyTeam Elite Plus gwarantuje dostęp do saloników biznesowych na całym świecie (nawet z biletem ekonomicznym), priorytetową odprawę i Fast Track. Skupienie się na zdobyciu statusu to najlepsza inwestycja w komfort podróży.</p>
                        </div>
                        <div class="border border-slate-700 bg-slate-800 p-6 rounded-2xl">
                            <h3 class="font-semibold text-lg text-slate-100">Uważaj na wygasanie mil i wysokie dopłaty</h3>
                            <p class="text-slate-400 mt-2">Zawsze sprawdzaj politykę wygasania mil. Przed rezerwacją biletu-nagrody zweryfikuj finalną kwotę do zapłaty – wysokie podatki mogą uczynić nagrodę nieopłacalną, zwłaszcza w klasie ekonomicznej.</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer class="text-center mt-20 py-8 border-t border-slate-800">
            <p class="text-sm text-slate-400">&copy; 2025 Interaktywny Raport Biznesowy.</p>
            <p class="text-xs text-slate-500 mt-1">Analiza przygotowana na podstawie danych rynkowych i regulaminów programów lojalnościowych.</p>
        </footer>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {

    const appData = {
        programs: [
            {
                id: 'miles-and-more',
                name: 'Miles & More',
                alliance: 'Star Alliance',
                pros: 'Najlepsza siatka połączeń z PL (LOT/LH Group), łatwość zbierania mil na ziemi.',
                cons: 'Wysokie dopłaty paliwowe, wygasanie mil po 36 m-cach.',
                rating: 4.5,
                scores: { easeOfStatus: 4, awardValue: 3, benefits: 5, availabilityPL: 5 }
            },
            {
                id: 'executive-club',
                name: 'Executive Club',
                alliance: 'oneworld',
                pros: 'Świetna wartość mil na krótkich trasach (RFS), przejrzysty system statusowy.',
                cons: 'Siatka wymaga przesiadki w LHR/HEL, wysokie dopłaty na lotach BA long-haul.',
                rating: 4.0,
                scores: { easeOfStatus: 4, awardValue: 5, benefits: 4, availabilityPL: 3 }
            },
            {
                id: 'flying-blue',
                name: 'Flying Blue',
                alliance: 'SkyTeam',
                pros: 'Regularne promocje (Promo Rewards), niższe dopłaty niż w M&M.',
                cons: 'Dynamiczne ceny nagród, zbieranie mil oparte o cenę biletu.',
                rating: 3.5,
                scores: { easeOfStatus: 3, awardValue: 4, benefits: 4, availabilityPL: 3 }
            },
            {
                id: 'aadvantage',
                name: 'AAdvantage',
                alliance: 'oneworld',
                pros: 'Brak dopłat paliwowych na lotach AA, wartościowe nagrody u partnerów.',
                cons: 'Trudne zbieranie mil w PL, skomplikowany system Loyalty Points.',
                rating: 3.0,
                scores: { easeOfStatus: 2, awardValue: 4, benefits: 3, availabilityPL: 2 }
            }
        ],
        analysis: {
            'miles-and-more': {
                title: 'Miles & More (Star Alliance)',
                content: `
                    <div class="space-y-8">
                        <div>
                            <h4 class="font-semibold text-lg text-slate-100">Kluczowe Linie Lotnicze</h4>
                            <div class="flex flex-wrap gap-2 mt-4">
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">LOT Polish Airlines</span>
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">Lufthansa</span>
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">SWISS</span>
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">Austrian Airlines</span>
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">United Airlines</span>
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">Air Canada</span>
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">Turkish Airlines</span>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-semibold text-lg text-slate-100">Potencjał Zbierania Mil</h4>
                            <p class="text-slate-400 mt-2">Program LOT-u i Lufthansy oferuje najszersze możliwości w Polsce. Mile zbiera się za loty (zależnie od klasy i dystansu) oraz u licznych partnerów (karty kredytowe mBank/Diners, hotele, wynajem aut). Mnożniki statusowe (x1.25+) znacznie przyspieszają akumulację.</p>
                            <div class="mt-4 p-4 bg-slate-900/50 rounded-xl">
                                <h5 class="font-medium text-slate-300 mb-2">Przykładowe naliczenie mil (WAW-JFK)</h5>
                                <div class="chart-container" style="height: 250px; max-width: 600px;">
                                    <canvas id="mmEarningChart"></canvas>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-semibold text-lg text-slate-100">Wartość i Wykorzystanie Nagród</h4>
                            <p class="text-slate-400 mt-2">Główny "sweet spot" to "Meilenschnäppchen" – comiesięczne oferty na loty w klasie biznes za ok. 55,000 mil do Ameryki Północnej. Standardowe nagrody są droższe i obarczone wysokimi podatkami, co obniża ich wartość, zwłaszcza w ekonomii.</p>
                        </div>
                        <div>
                            <h4 class="font-semibold text-lg text-slate-100">Poziomy Statusu i Korzyści</h4>
                            <p class="text-slate-400 mt-2">Status <strong>Star Alliance Gold</strong> (osiągany na poziomie Senator) jest kluczowy. Zapewnia dostęp do saloników, priorytetową obsługę i dodatkowy bagaż w całym sojuszu. Poziom Frequent Traveller (Star Alliance Silver) jest dobrym pierwszym celem.</p>
                        </div>
                    </div>
                `
            },
            'executive-club': {
                title: 'Executive Club (oneworld)',
                content: `
                    <div class="space-y-8">
                         <div>
                            <h4 class="font-semibold text-lg text-slate-100">Kluczowe Linie Lotnicze</h4>
                            <div class="flex flex-wrap gap-2 mt-4">
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">British Airways</span>
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">Iberia</span>
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">American Airlines</span>
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">Finnair</span>
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">Qatar Airways</span>
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">Japan Airlines</span>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-semibold text-lg text-slate-100">Potencjał Zbierania Mil (Avios)</h4>
                            <p class="text-slate-400 mt-2">Punkty Avios zbierane są za loty liniami oneworld. W Polsce możliwości zbierania na ziemi są ograniczone, ale punkty można transferować z niektórych programów bankowych i hotelowych, co zwiększa elastyczność.</p>
                             <div class="mt-4 p-4 bg-slate-900/50 rounded-xl">
                                <h5 class="font-medium text-slate-300 mb-2">Porównanie dopłat do biletu-nagrody (WAW-LHR)</h5>
                                <div class="chart-container" style="height: 250px; max-width: 600px;">
                                    <canvas id="ecFeesChart"></canvas>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-semibold text-lg text-slate-100">Wartość i Wykorzystanie Nagród</h4>
                            <p class="text-slate-400 mt-2">Największy "sweet spot" to <strong>Reward Flight Saver</strong> na trasach europejskich (np. WAW-LHR) z niską, stałą opłatą gotówkową. To czyni go niezwykle opłacalnym dla częstych lotów po Europie. Nagrody long-haul na lotach BA mają wysokie dopłaty, ale na lotach partnerów (np. AA) są znacznie niższe.</p>
                        </div>
                        <div>
                            <h4 class="font-semibold text-lg text-slate-100">Poziomy Statusu i Korzyści</h4>
                            <p class="text-slate-400 mt-2">Status zdobywa się za pomocą punktów "Tier Points". Już 600 TP (+4 loty BA/IB) w roku daje status <strong>Silver</strong> (oneworld Sapphire) z dostępem do saloników i priorytetową obsługą. To jeden z łatwiejszych do osiągnięcia wartościowych statusów w Europie.</p>
                        </div>
                    </div>
                `
            },
            'flying-blue': {
                title: 'Flying Blue (SkyTeam)',
                content: `
                     <div class="space-y-8">
                        <div>
                            <h4 class="font-semibold text-lg text-slate-100">Sojusz SkyTeam - Przegląd</h4>
                            <p class="text-slate-400 mt-2">SkyTeam to globalny sojusz, którego europejskimi filarami są Air France i KLM. Dla podróżnika z Polski oznacza to przede wszystkim doskonałą siatkę połączeń do całego świata przez huby w Paryżu (CDG) i Amsterdamie (AMS). Choć brakuje silnego, lokalnego przewoźnika w Polsce, sojusz nadrabia globalnym zasięgiem, zwłaszcza na trasach do Ameryki Północnej (dzięki partnerstwu z Delta) i Azji.</p>
                        </div>
                         <div>
                            <h4 class="font-semibold text-lg text-slate-100">Kluczowe Linie Lotnicze</h4>
                            <div class="flex flex-wrap gap-2 mt-4">
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">Air France</span>
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">KLM</span>
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">Delta Air Lines</span>
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">TAROM</span>
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">Korean Air</span>
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">Saudia</span>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-semibold text-lg text-slate-100">Potencjał Zbierania Mil</h4>
                            <p class="text-slate-400 mt-2">W przeciwieństwie do tradycyjnych programów, w Flying Blue mile za loty Air France i KLM naliczane są na podstawie ceny biletu (bez podatków), a nie dystansu. To korzystne przy droższych biletach. Partnerzy naziemni w Polsce są ograniczeni.</p>
                        </div>
                        <div>
                            <h4 class="font-semibold text-lg text-slate-100">Wartość i Wykorzystanie Nagród</h4>
                            <p class="text-slate-400 mt-2">Ceny biletów-nagród są dynamiczne, co oznacza brak stałej tabeli. Największą zaletą są comiesięczne <strong>Promo Rewards</strong>, które oferują zniżki 25-50% na wybrane trasy, często w klasie biznes. Dopłaty paliwowe są generalnie niższe niż w Miles & More.</p>
                            <div class="mt-4 p-4 bg-slate-900/50 rounded-xl">
                                <h5 class="font-medium text-slate-300 mb-2">Wartość Promo Rewards (Biznes, CDG-JFK)</h5>
                                <div class="chart-container" style="height: 250px; max-width: 600px;">
                                    <canvas id="fbPromoChart"></canvas>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-semibold text-lg text-slate-100">Poziomy Statusu i Korzyści</h4>
                            <p class="text-slate-400 mt-2">Status zdobywa się na podstawie punktów XP (Experience Points). Poziom Gold (180 XP) daje status <strong>SkyTeam Elite Plus</strong>, który jest honorowany w całym sojuszu i zapewnia dostęp do saloników, priorytetową obsługę i dodatkowy bagaż. Utrzymanie statusu jest relatywnie proste dla regularnie podróżujących.</p>
                        </div>
                    </div>
                `
            },
            'aadvantage': {
                title: 'AAdvantage (oneworld)',
                content: `
                    <div class="space-y-8">
                         <div>
                            <h4 class="font-semibold text-lg text-slate-100">Kluczowe Linie Lotnicze</h4>
                            <div class="flex flex-wrap gap-2 mt-4">
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">American Airlines</span>
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">British Airways</span>
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">Finnair</span>
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">Qatar Airways</span>
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">Japan Airlines</span>
                                <span class="bg-slate-700 text-slate-300 text-sm font-medium px-3 py-1 rounded-full">Alaska Airlines</span>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-semibold text-lg text-slate-100">Potencjał Zbierania Mil</h4>
                            <p class="text-slate-400 mt-2">Zbieranie mil i statusu opiera się na skomplikowanym systemie Loyalty Points. Dla podróżnika z Polski, najprostszym sposobem jest latanie liniami partnerskimi oneworld. Zbieranie mil od partnerów naziemnych jest bardzo trudne bez dostępu do amerykańskiego rynku kart kredytowych.</p>
                        </div>
                        <div>
                            <h4 class="font-semibold text-lg text-slate-100">Wartość i Wykorzystanie Nagród</h4>
                            <p class="text-slate-400 mt-2">Absolutnie największy "sweet spot" to <strong>brak dopłat paliwowych na lotach American Airlines</strong>. To sprawia, że bilety-nagrody do USA w klasie biznes są ekstremalnie opłacalne pod względem opłat gotówkowych. Program ma również atrakcyjną tabelę nagród na loty partnerów, np. do Azji z Qatar Airways.</p>
                            <div class="mt-4 p-4 bg-slate-900/50 rounded-xl">
                                <h5 class="font-medium text-slate-300 mb-2">Całkowity koszt w gotówce (Biznes, LHR-JFK)</h5>
                                <div class="chart-container" style="height: 250px; max-width: 600px;">
                                    <canvas id="aaFeesChart"></canvas>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-semibold text-lg text-slate-100">Poziomy Statusu i Korzyści</h4>
                            <p class="text-slate-400 mt-2">Status <strong>AAdvantage Platinum</strong> (odpowiednik oneworld Sapphire, 75 000 Loyalty Points) zapewnia dostęp do saloników biznesowych i priorytetową obsługę. Zdobycie go bez częstych lotów na pokładach American Airlines może być wyzwaniem.</p>
                        </div>
                    </div>
                `
            },
        }
    };

    const populateComparisonTable = () => {
        const tableBody = document.getElementById('comparisonTableBody');
        appData.programs.forEach(p => {
            const row = document.createElement('tr');
            const fullTitle = appData.analysis[p.id].title;
            let titleCellHtml = '';

            if (fullTitle.includes('(')) {
                const parts = fullTitle.split(' (');
                const mainName = parts[0];
                const allianceName = `(${parts[1].replace(')', '')})`;
                titleCellHtml = `<div class="font-medium text-slate-200">${mainName}</div><div class="text-slate-400 text-sm">${allianceName}</div>`;
            } else {
                titleCellHtml = `<div class="font-medium text-slate-200">${fullTitle}</div>`;
            }

            row.innerHTML = `
                <td class="py-5 pl-4 pr-3 text-sm sm:pl-0">
                    ${titleCellHtml}
                </td>
                <td class="whitespace-normal px-3 py-5 text-sm text-slate-400 max-w-xs">${p.pros}</td>
                <td class="whitespace-normal px-3 py-5 text-sm text-slate-400 max-w-xs">${p.cons}</td>
                <td class="whitespace-nowrap px-3 py-5 text-sm text-slate-400 text-center">
                    <span class="inline-flex items-center rounded-full bg-emerald-500/10 px-3 py-1 text-base font-semibold text-emerald-400 ring-2 ring-inset ring-emerald-500/20">${p.rating.toFixed(1)}</span>
                </td>
            `;
            tableBody.appendChild(row);
        });
    };
    
    const setupRadarChart = () => {
        const ctx = document.getElementById('programRadarChart').getContext('2d');
        const labels = ['Łatwość Statusu', 'Wartość Nagród', 'Korzyści', 'Dostępność w PL'];
        
        const datasets = appData.programs.map((p, index) => {
            const colors = [
                { bg: 'rgba(52, 211, 153, 0.2)', border: '#34d399' }, // emerald-400
                { bg: 'rgba(59, 130, 246, 0.2)', border: '#3b82f6' },  // blue-500
                { bg: 'rgba(239, 68, 68, 0.2)', border: '#ef4444' }, // red-500
                { bg: 'rgba(168, 85, 247, 0.2)', border: '#a855f7' }  // purple-500
            ];
            const color = colors[index % colors.length];

            return {
                label: appData.analysis[p.id].title.split(' (')[0],
                data: [p.scores.easeOfStatus, p.scores.awardValue, p.scores.benefits, p.scores.availabilityPL],
                backgroundColor: color.bg,
                borderColor: color.border,
                pointBackgroundColor: color.border,
                pointBorderColor: '#0f172a',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: color.border,
                borderWidth: 2
            };
        });

        new Chart(ctx, {
            type: 'radar',
            data: {
                labels: labels,
                datasets: datasets
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        angleLines: { color: 'rgba(100, 116, 139, 0.2)' },
                        grid: { color: 'rgba(100, 116, 139, 0.2)' },
                        pointLabels: { font: { size: 12 }, color: '#94a3b8' },
                        suggestedMin: 0,
                        suggestedMax: 5,
                        ticks: { stepSize: 1, backdropColor: 'transparent', color: '#64748b' }
                    }
                },
                plugins: {
                    legend: {
                        position: 'top',
                        labels: { color: '#cbd5e1' }
                    },
                    tooltip: {
                         backgroundColor: '#1e293b',
                         titleColor: '#cbd5e1',
                         bodyColor: '#94a3b8',
                         borderColor: '#334155',
                         borderWidth: 1,
                    }
                }
            }
        });
    };

    const setupAnalysisTabs = () => {
        const tabsContainer = document.getElementById('analysisTabs');
        const contentContainer = document.getElementById('analysisContent');
        
        Object.keys(appData.analysis).forEach((programId, index) => {
            const program = appData.analysis[programId];
            const button = document.createElement('button');
            const fullTitle = program.title;
            let buttonHtml = '';

            if (fullTitle.includes('(')) {
                const parts = fullTitle.split(' (');
                const mainName = parts[0];
                const allianceName = `(${parts[1].replace(')', '')})`;
                buttonHtml = `${mainName}<br><span class="text-xs text-slate-500 font-normal group-hover:text-slate-300 transition-colors">${allianceName}</span>`;
            } else {
                buttonHtml = fullTitle;
            }

            button.innerHTML = buttonHtml;
            button.className = `tab-button group text-center flex-shrink-0 border-b-2 border-transparent pb-3 px-3 text-sm font-medium text-slate-400 hover:border-slate-500 hover:text-slate-300 transition-colors ${index === 0 ? 'active' : ''}`;
            button.dataset.target = programId;
            tabsContainer.appendChild(button);
        });
        
        const renderTabContent = (programId) => {
            contentContainer.innerHTML = appData.analysis[programId].content;
            setTimeout(() => {
                if (programId === 'miles-and-more') renderMmEarningChart();
                else if (programId === 'executive-club') renderEcFeesChart();
                else if (programId === 'flying-blue') renderFbPromoChart();
                else if (programId === 'aadvantage') renderAaFeesChart();
            }, 0);
        };

        tabsContainer.addEventListener('click', (e) => {
            const button = e.target.closest('.tab-button');
            if (button) {
                tabsContainer.querySelectorAll('.tab-button').forEach(btn => {
                    btn.classList.remove('active');
                    btn.querySelector('span')?.classList.remove('text-slate-300');
                });
                button.classList.add('active');
                button.querySelector('span')?.classList.add('text-slate-300');
                renderTabContent(button.dataset.target);
            }
        });

        renderTabContent(Object.keys(appData.analysis)[0]);
    };
    
    const chartDefaultOptions = {
        responsive: true,
        maintainAspectRatio: false,
        plugins: { legend: { display: false } },
        scales: { 
            x: { beginAtZero: true, grid: { color: 'rgba(100, 116, 139, 0.1)' }, ticks: { color: '#94a3b8' } },
            y: { grid: { display: false }, ticks: { color: '#94a3b8' } }
        }
    };

    const renderMmEarningChart = () => {
        const ctx = document.getElementById('mmEarningChart')?.getContext('2d');
        if (!ctx) return;
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Ekonomiczna (tania)', 'Ekonomiczna (flex)', 'Biznes'],
                datasets: [{
                    label: 'Mile nagrodowe',
                    data: [1150, 4580, 9160],
                    backgroundColor: 'rgba(52, 211, 153, 0.4)',
                    borderColor: '#34d399',
                    borderWidth: 1,
                    borderRadius: 4
                }]
            },
            options: { ...chartDefaultOptions, indexAxis: 'y' }
        });
    };

    const renderEcFeesChart = () => {
        const ctx = document.getElementById('ecFeesChart')?.getContext('2d');
        if (!ctx) return;
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Executive Club (RFS)', 'Miles & More (Standard)'],
                datasets: [{
                    label: 'Dopłaty gotówkowe (PLN)',
                    data: [110, 550],
                    backgroundColor: ['rgba(52, 211, 153, 0.4)', 'rgba(239, 68, 68, 0.4)'],
                    borderColor: ['#34d399', '#ef4444'],
                    borderWidth: 1,
                    borderRadius: 4
                }]
            },
            options: { ...chartDefaultOptions, scales: { ...chartDefaultOptions.scales, y: { beginAtZero: true, grid: { color: 'rgba(100, 116, 139, 0.1)' }, ticks: { color: '#94a3b8' } }, x: { grid: { display: false }, ticks: { color: '#94a3b8' } } } }
        });
    };

    const renderFbPromoChart = () => {
        const ctx = document.getElementById('fbPromoChart')?.getContext('2d');
        if (!ctx) return;
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Cena Standardowa', 'Cena w Promo Rewards'],
                datasets: [{
                    label: 'Mile w jedną stronę',
                    data: [145000, 72500],
                    backgroundColor: ['rgba(239, 68, 68, 0.4)', 'rgba(52, 211, 153, 0.4)'],
                    borderColor: ['#ef4444', '#34d399'],
                    borderWidth: 1,
                    borderRadius: 4
                }]
            },
            options: { ...chartDefaultOptions, scales: { ...chartDefaultOptions.scales, y: { beginAtZero: true, grid: { color: 'rgba(100, 116, 139, 0.1)' }, ticks: { color: '#94a3b8' } }, x: { grid: { display: false }, ticks: { color: '#94a3b8' } } } }
        });
    };

    const renderAaFeesChart = () => {
        const ctx = document.getElementById('aaFeesChart')?.getContext('2d');
        if (!ctx) return;
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['AAdvantage (na AA)', 'Executive Club (na BA)'],
                datasets: [{
                    label: 'Dopłaty gotówkowe (PLN)',
                    data: [50, 2500],
                    backgroundColor: ['rgba(52, 211, 153, 0.4)', 'rgba(239, 68, 68, 0.4)'],
                    borderColor: ['#34d399', '#ef4444'],
                    borderWidth: 1,
                    borderRadius: 4
                }]
            },
            options: { ...chartDefaultOptions, scales: { ...chartDefaultOptions.scales, y: { beginAtZero: true, grid: { color: 'rgba(100, 116, 139, 0.1)' }, ticks: { color: '#94a3b8' } }, x: { grid: { display: false }, ticks: { color: '#94a3b8' } } } }
        });
    };
    
    const setupSmoothScrolling = () => {
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    };
    
    const generateStrategyBtn = document.getElementById('generate-strategy-btn');
    const resultContainer = document.getElementById('strategy-result-container');
    const geminiResponseEl = document.getElementById('gemini-response');

    const handleStrategyGeneration = async () => {
        const travelClass = document.getElementById('travel-class').value;
        const travelGoal = document.getElementById('travel-goal').value;
        const travelPatterns = document.getElementById('travel-patterns').value;

        if (!travelPatterns.trim()) {
            geminiResponseEl.innerHTML = '<p class="text-red-400">Proszę opisać swoje trasy i częstotliwość lotów, abyśmy mogli przygotować analizę.</p>';
            resultContainer.classList.remove('hidden');
            return;
        }

        resultContainer.classList.remove('hidden');
        geminiResponseEl.innerHTML = `
            <div class="flex items-center justify-center gap-3">
                <div class="gemini-spinner"></div>
                <p>Analizuję Twoje potrzeby i tworzę spersonalizowaną strategię...</p>
            </div>
        `;
        generateStrategyBtn.disabled = true;

        const systemPrompt = "Jesteś światowej klasy analitykiem specjalizującym się w programach lojalnościowych linii lotniczych i optymalizacji podróży służbowych. Twoim zadaniem jest tworzenie spersonalizowanych, zwięzłych i praktycznych strategii dla podróżnych na podstawie ich danych wejściowych. Analizuj podane informacje i wskaż 1-2 najlepsze programy, uzasadniając wybór w kontekście podanych tras, preferencji i celów. Podkreśl konkretne korzyści i potencjalne wady. Twoja odpowiedź powinna być profesjonalna, ale przystępna. Odpowiedź sformatuj używając podstawowego markdown (nagłówki jako `###`, pogrubienia jako `**text**`, listy jako `- element`).";
        
        const userQuery = `
            Przeanalizuj mój profil podróżny i stwórz dla mnie spersonalizowaną strategię wyboru programu lojalnościowego.

            **Moje trasy i częstotliwość lotów:**
            ${travelPatterns}

            **Preferowana klasa podróży:**
            ${travelClass}

            **Mój główny cel:**
            ${travelGoal}

            Na podstawie tych informacji, przedstaw mi konkretną, profesjonalną rekomendację i jej szczegółowe uzasadnienie.
        `;

        try {
            const apiKey = "AIzaSyA4mqnfwlTpquesuUZ3vdqsQyU6OFfxXeQ"; 
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };
            
            let response;
            let retries = 3;
            let delay = 1000;

            while (retries > 0) {
                response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (response.ok) {
                    break;
                } else {
                    retries--;
                    if (retries === 0) {
                         throw new Error(`Błąd API: ${response.statusText}`);
                    }
                    await new Promise(res => setTimeout(res, delay));
                    delay *= 2;
                }
            }

            const result = await response.json();
            const candidate = result.candidates?.[0];

            if (candidate && candidate.content?.parts?.[0]?.text) {
                const text = candidate.content.parts[0].text;
                geminiResponseEl.innerHTML = simpleMarkdownToHtml(text);
            } else {
                 throw new Error("Otrzymano nieprawidłową odpowiedź od API.");
            }

        } catch (error) {
            console.error(error);
            geminiResponseEl.innerHTML = `<p class="text-red-400">Wystąpił błąd podczas generowania strategii. Spróbuj ponownie później.</p>`;
        } finally {
            generateStrategyBtn.disabled = false;
        }
    };

    const simpleMarkdownToHtml = (markdown) => {
        return markdown
            .replace(/### (.*$)/gim, '<h3 class="text-xl font-semibold text-slate-100 mt-6 mb-3">$1</h3>')
            .replace(/\*\*([^*]+)\*\*/g, '<strong class="text-emerald-400">$1</strong>')
            .replace(/^- (.*$)/gim, '<li class="ml-4 mb-2">$1</li>')
            .replace(/^(?!<h|<li|<\/u)(.*$)/gim, '<p class="mb-4">$1</p>')
            .replace(/<\/li>\n<li/g, '</li><li')
            .replace(/(\n<p>){2,}/g, '<p>')
            .replace(/<p>\s*<\/p>/g, '');
    };

    generateStrategyBtn.addEventListener('click', handleStrategyGeneration);

    populateComparisonTable();
    setupRadarChart();
    setupAnalysisTabs();
    setupSmoothScrolling();
});
</script>
</body>
</html>

